#!/bin/bash
set -e

if [ "$1" == "start" ]; then
    sudo systemctl start docker
    cd "$(dirname "$(readlink ~/.local/bin/work)")"
    sudo docker-compose start || (sudo docker-compose build && sudo docker-compose start)
elif [ "$1" == "stop" ]; then
    cd "$(dirname "$(readlink ~/.local/bin/work)")"
    sudo systemctl is-active docker && (
        sudo docker-compose stop;
        sudo systemctl stop docker;
        sudo systemctl stop containerd
    )
fi
